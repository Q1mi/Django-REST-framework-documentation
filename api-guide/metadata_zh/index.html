<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <title>Metadata - Django REST framework中文站点</title>
  <link href="../../img/favicon.ico" rel="icon" type="image/x-icon">
  <link rel="canonical" href="https://q1mi.github.io/Django-REST-framework-documentation/api-guide/metadata_zh/" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Django, API, DRF, 中文文档, rest_framework, django-rest-framework, REST, Metadata">
  <meta name="author" content="李文周">

  <!-- Le styles -->
  <link href="../../css/prettify.css" rel="stylesheet">
  <link href="../../css/bootstrap.css" rel="stylesheet">
  <link href="../../css/bootstrap-responsive.css" rel="stylesheet">
  <link href="../../css/default.css" rel="stylesheet">

  <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-18852272-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script');
      ga.type = 'text/javascript';
      ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(ga, s);
    })();
  </script>

  <style>
  #sidebarInclude img {
      margin-bottom: 10px;
  }
  #sidebarInclude a.promo {
      color: black;
  }
    @media (max-width: 767px) {
      div.promo {
        display: none;
      }
    }
  </style>
</head>
<body onload="prettyPrint()" class="-page">

  <div class="wrapper">
        <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="repo-link btn btn-primary btn-small" href="https://github.com/encode/django-rest-framework/tree/master">GitHub</a>
          <a class="repo-link btn btn-inverse btn-small " rel="next" href="../schemas/">
            Next <i class="icon-arrow-right icon-white"></i>
          </a>
          <a class="repo-link btn btn-inverse btn-small " rel="prev" href="../content-negotiation_zh/">
            <i class="icon-arrow-left icon-white"></i> Previous
          </a>
          <a id="search_modal_show" class="repo-link btn btn-inverse btn-small" href="#mkdocs_search_modal" data-toggle="modal" data-target="#mkdocs_search_modal"><i class="icon-search icon-white"></i> Search</a>
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="https://q1mi.github.io/Django-REST-framework-documentation/">Django REST framework 中文文档</a>
          <div class="nav-collapse collapse">
            
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
               
              <li >
                <a href="../..">主页</a>
              </li>
                
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">教程 <b class="caret"></b></a>
                <ul class="dropdown-menu">
                  
                  <li >
                    <a href="../../tutorial/quickstart_zh/">Quickstart</a>
                  </li>
                  
                  <li >
                    <a href="../../tutorial/1-serialization_zh/">1 - Serialization</a>
                  </li>
                  
                  <li >
                    <a href="../../tutorial/2-requests-and-responses_zh/">2 - Requests and responses</a>
                  </li>
                  
                  <li >
                    <a href="../../tutorial/3-class-based-views_zh/">3 - Class based views</a>
                  </li>
                  
                  <li >
                    <a href="../../tutorial/4-authentication-and-permissions_zh/">4 - Authentication and permissions</a>
                  </li>
                  
                  <li >
                    <a href="../../tutorial/5-relationships-and-hyperlinked-apis_zh/">5 - Relationships and hyperlinked APIs</a>
                  </li>
                  
                  <li >
                    <a href="../../tutorial/6-viewsets-and-routers_zh/">6 - Viewsets and routers</a>
                  </li>
                  
                  <li >
                    <a href="../../tutorial/7-schemas-and-client-libraries_zh/">7 - Schemas and client libraries</a>
                  </li>
                  
                </ul>
              </li>
                
              <li class="dropdown active">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">API指南 <b class="caret"></b></a>
                <ul class="dropdown-menu">
                  
                  <li >
                    <a href="../requests_zh/">Requests</a>
                  </li>
                  
                  <li >
                    <a href="../responses_zh/">Responses</a>
                  </li>
                  
                  <li >
                    <a href="../views_zh/">Views</a>
                  </li>
                  
                  <li >
                    <a href="../generic-views_zh/">Generic views</a>
                  </li>
                  
                  <li >
                    <a href="../viewsets_zh/">Viewsets</a>
                  </li>
                  
                  <li >
                    <a href="../routers_zh/">Routers</a>
                  </li>
                  
                  <li >
                    <a href="../parsers_zh/">Parsers</a>
                  </li>
                  
                  <li >
                    <a href="../renderers_zh/">Renderers</a>
                  </li>
                  
                  <li >
                    <a href="../serializers_zh/">Serializers</a>
                  </li>
                  
                  <li >
                    <a href="../fields_zh/">Serializer fields</a>
                  </li>
                  
                  <li >
                    <a href="../relations/">Serializer relations</a>
                  </li>
                  
                  <li >
                    <a href="../validators/">Validators</a>
                  </li>
                  
                  <li >
                    <a href="../authentication_zh/">Authentication</a>
                  </li>
                  
                  <li >
                    <a href="../permissions_zh/">Permissions</a>
                  </li>
                  
                  <li >
                    <a href="../throttling_zh/">Throttling</a>
                  </li>
                  
                  <li >
                    <a href="../filtering_zh/">Filtering</a>
                  </li>
                  
                  <li >
                    <a href="../pagination_zh/">Pagination</a>
                  </li>
                  
                  <li >
                    <a href="../versioning_zh/">Versioning</a>
                  </li>
                  
                  <li >
                    <a href="../content-negotiation_zh/">Content negotiation</a>
                  </li>
                  
                  <li class="active" >
                    <a href="./">Metadata</a>
                  </li>
                  
                  <li >
                    <a href="../schemas/">Schemas</a>
                  </li>
                  
                  <li >
                    <a href="../format-suffixes_zh/">Format suffixes</a>
                  </li>
                  
                  <li >
                    <a href="../reverse_zh/">Returning URLs</a>
                  </li>
                  
                  <li >
                    <a href="../exceptions/">Exceptions</a>
                  </li>
                  
                  <li >
                    <a href="../status-codes_zh/">Status codes</a>
                  </li>
                  
                  <li >
                    <a href="../testing_zh/">Testing</a>
                  </li>
                  
                  <li >
                    <a href="../settings/">Settings</a>
                  </li>
                  
                </ul>
              </li>
                
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">主题 <b class="caret"></b></a>
                <ul class="dropdown-menu">
                  
                  <li >
                    <a href="../../topics/documenting-your-api/">Documenting your API</a>
                  </li>
                  
                  <li >
                    <a href="../../topics/api-clients/">API Clients</a>
                  </li>
                  
                  <li >
                    <a href="../../topics/internationalization/">Internationalization</a>
                  </li>
                  
                  <li >
                    <a href="../../topics/ajax-csrf-cors_zh/">AJAX, CSRF & CORS</a>
                  </li>
                  
                  <li >
                    <a href="../../topics/html-and-forms/">HTML & Forms</a>
                  </li>
                  
                  <li >
                    <a href="../../topics/browser-enhancements/">Browser Enhancements</a>
                  </li>
                  
                  <li >
                    <a href="../../topics/browsable-api/">The Browsable API</a>
                  </li>
                  
                  <li >
                    <a href="../../topics/rest-hypermedia-hateoas/">REST, Hypermedia & HATEOAS</a>
                  </li>
                  
                  <li >
                    <a href="../../topics/third-party-packages/">Third Party Packages</a>
                  </li>
                  
                  <li >
                    <a href="../../topics/tutorials-and-resources/">Tutorials and Resources</a>
                  </li>
                  
                  <li >
                    <a href="../../topics/contributing/">Contributing to REST framework</a>
                  </li>
                  
                  <li >
                    <a href="../../topics/project-management/">Project management</a>
                  </li>
                  
                  <li >
                    <a href="../../topics/3.0-announcement/">3.0 Announcement</a>
                  </li>
                  
                  <li >
                    <a href="../../topics/3.1-announcement/">3.1 Announcement</a>
                  </li>
                  
                  <li >
                    <a href="../../topics/3.2-announcement/">3.2 Announcement</a>
                  </li>
                  
                  <li >
                    <a href="../../topics/3.3-announcement/">3.3 Announcement</a>
                  </li>
                  
                  <li >
                    <a href="../../topics/3.4-announcement/">3.4 Announcement</a>
                  </li>
                  
                  <li >
                    <a href="../../topics/3.5-announcement/">3.5 Announcement</a>
                  </li>
                  
                  <li >
                    <a href="../../topics/kickstarter-announcement/">Kickstarter Announcement</a>
                  </li>
                  
                  <li >
                    <a href="../../topics/mozilla-grant/">Mozilla Grant</a>
                  </li>
                  
                  <li >
                    <a href="../../topics/funding/">Funding</a>
                  </li>
                  
                  <li >
                    <a href="../../topics/release-notes/">Release Notes</a>
                  </li>
                  
                  <li >
                    <a href="../../topics/jobs/">Jobs</a>
                  </li>
                  
                </ul>
              </li>
               

            </ul>
            
          </div>
          <!--/.nav-collapse -->

        </div>
      </div>
    </div>

    <div class="body-content">
      <div class="container-fluid">
        <!-- Search Modal -->
        <div id="mkdocs_search_modal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h3 id="myModalLabel">Documentation search</h3>
          </div>

          <div class="modal-body">
            <form role="form" autocomplete="off">
              <div class="form-group">
                <input type="text" name="q" class="form-control" placeholder="Search..." id="mkdocs-search-query">
              </div>
            </form>
            <div id="mkdocs-search-results"></div>
          </div>

          <div class="modal-footer">
            <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
          </div>
        </div>

        <div class="row-fluid">
          <div class="span3">
            <div id="table-of-contents">
              <ul class="nav nav-list side-nav well sidebar-nav-fixed">
                

                
                  <li class="main">
                    <a href="#metadata">Metadata （元数据）</a>
                  </li>

                  
                    <li>
                      <a href="#setting-the-metadata-scheme">Setting the metadata scheme （设置元数据模式）</a>
                    </li>
                  
                    <li>
                      <a href="#creating-schema-endpoints">Creating schema endpoints （创建模式终端）</a>
                    </li>
                  
                
                  <li class="main">
                    <a href="#custom-metadata-classes">Custom metadata classes （自定义元数据类）</a>
                  </li>

                  
                    <li>
                      <a href="#example">Example （举个例子）</a>
                    </li>
                  
                
                  <li class="main">
                    <a href="#third-party-packages">Third party packages</a>
                  </li>

                  
                    <li>
                      <a href="#drf-schema-adapter">DRF-schema-adapter</a>
                    </li>
                  
                

                  <div class="promo">
                    <hr />
                    <div id="sidebarInclude" style="display: none;"></div>
                    <div class="my-qr">
                      <p style="color: #A30000;text-align: center;font-weight: bold">扫一扫 支持我</p>
                      <div style="max-width: 160px;margin: 0 auto">
                        <p style="text-align: center;margin-bottom: 5px;">支付宝</p>
                        <img src="../../img/zfb_qr.jpg" alt="支付宝二维码">
                      </div>
                      <div style="max-width: 160px;margin: 10px auto 0">
                        <p style="text-align: center;margin-bottom: 5px">微信</p>
                        <img src="../../img/wx_qr.jpg" alt="微信二维码">
                      </div>
                    </div>
                  </div>
              </ul>

            </div>
          </div>

          <div id="main-content" class="span9">
            
              
                
                  <a class="github" href="https://github.com/encode/django-rest-framework/tree/master/rest_framework/m">
                    <span class="label label-info">m</span>
                  </a>
                
                  <a class="github" href="https://github.com/encode/django-rest-framework/tree/master/rest_framework/e">
                    <span class="label label-info">e</span>
                  </a>
                
                  <a class="github" href="https://github.com/encode/django-rest-framework/tree/master/rest_framework/t">
                    <span class="label label-info">t</span>
                  </a>
                
                  <a class="github" href="https://github.com/encode/django-rest-framework/tree/master/rest_framework/a">
                    <span class="label label-info">a</span>
                  </a>
                
                  <a class="github" href="https://github.com/encode/django-rest-framework/tree/master/rest_framework/d">
                    <span class="label label-info">d</span>
                  </a>
                
                  <a class="github" href="https://github.com/encode/django-rest-framework/tree/master/rest_framework/a">
                    <span class="label label-info">a</span>
                  </a>
                
                  <a class="github" href="https://github.com/encode/django-rest-framework/tree/master/rest_framework/t">
                    <span class="label label-info">t</span>
                  </a>
                
                  <a class="github" href="https://github.com/encode/django-rest-framework/tree/master/rest_framework/a">
                    <span class="label label-info">a</span>
                  </a>
                
                  <a class="github" href="https://github.com/encode/django-rest-framework/tree/master/rest_framework/.">
                    <span class="label label-info">.</span>
                  </a>
                
                  <a class="github" href="https://github.com/encode/django-rest-framework/tree/master/rest_framework/p">
                    <span class="label label-info">p</span>
                  </a>
                
                  <a class="github" href="https://github.com/encode/django-rest-framework/tree/master/rest_framework/y">
                    <span class="label label-info">y</span>
                  </a>
                
              

              <h1 id="metadata"><a class="toclink" href="#metadata">Metadata （元数据）</a></h1>
<blockquote>
<p>[The <code>OPTIONS</code>]方法允许客户端确定与资源或服务器功能相关的选项和/或需求，而无需暗示资源操作或启动资源检索。</p>
<p>&mdash; <a href="http://tools.ietf.org/html/rfc7231#section-4.3.7">RFC7231, Section 4.3.7.</a></p>
</blockquote>
<p>REST框架包含一个可配置的机制，用于确定API应该如何响应 <code>OPTIONS</code> 请求。这允许您返回API模式或其他资源信息。</p>
<p>对于HTTP <code>OPTIONS</code> 请求究竟应该返回什么样的响应样式，目前还没有广泛采用的约定，因此我们提供了一种返回一些有用信息的点对点样式。</p>
<p>下面是一个示例响应，它演示了默认情况下返回的信息。</p>
<pre><code>HTTP 200 OK
Allow: GET, POST, HEAD, OPTIONS
Content-Type: application/json

{
    "name": "To Do List",
    "description": "List existing 'To Do' items, or create a new item.",
    "renders": [
        "application/json",
        "text/html"
    ],
    "parses": [
        "application/json",
        "application/x-www-form-urlencoded",
        "multipart/form-data"
    ],
    "actions": {
        "POST": {
            "note": {
                "type": "string",
                "required": false,
                "read_only": false,
                "label": "title",
                "max_length": 100
            }
        }
    }
}
</code></pre>
<h2 id="setting-the-metadata-scheme"><a class="toclink" href="#setting-the-metadata-scheme">Setting the metadata scheme （设置元数据模式）</a></h2>
<p>您可以使用 <code>'DEFAULT_METADATA_CLASS'</code> 设置键全局设置元数据类：</p>
<pre><code>REST_FRAMEWORK = {
    'DEFAULT_METADATA_CLASS': 'rest_framework.metadata.SimpleMetadata'
}
</code></pre>
<p>也可以为视图单独设置元数据类：</p>
<pre><code>class APIRoot(APIView):
    metadata_class = APIRootMetadata

    def get(self, request, format=None):
        return Response({
            ...
        })
</code></pre>
<p>REST框架包只包含一个名为 <code>SimpleMetadata</code> 的元数据类实现方式。如果要使用其他样式，则需要实现自定义元数据类。</p>
<h2 id="creating-schema-endpoints"><a class="toclink" href="#creating-schema-endpoints">Creating schema endpoints （创建模式终端）</a></h2>
<p>如果对使用常规 <code>GET</code> 请求访问的模式终端的创建有特定的要求，则可以考虑重新使用元数据API来执行此操作。</p>
<p>例如，可以在视图集上使用以下附加路由来提供可链接的模式终端。</p>
<pre><code>@list_route(methods=['GET'])
def schema(self, request):
    meta = self.metadata_class()
    data = meta.determine_metadata(request, self)
    return Response(data)
</code></pre>
<p>有许多可能会选择采用这种方法的理由，其中包括 <code>OPTIONS</code> 响应<a href="https://www.mnot.net/blog/2012/10/29/NO_OPTIONS">不可缓存</a>。</p>
<hr />
<h1 id="custom-metadata-classes"><a class="toclink" href="#custom-metadata-classes">Custom metadata classes （自定义元数据类）</a></h1>
<p>如果要提供自定义元数据类，则应重写 <code>BaseMetadata</code> 并应用 <code>determine_metadata(self, request, view)</code> 方法。</p>
<p>你可能希望做的有用的事情包括返回模式信息、使用<a href="http://json-schema.org/">JSON schema （JSON 模式）</a>之类的格式，或者将调试信息返回给管理员用户。</p>
<h2 id="example"><a class="toclink" href="#example">Example （举个例子）</a></h2>
<p>以下的类可被用于限制返回给 <code>OPTIONS</code> 的信息。</p>
<pre><code>class MinimalMetadata(BaseMetadata):
    """
    Don't include field and other information for `OPTIONS` requests.
    Just return the name and description.
    """
    def determine_metadata(self, request, view):
        return {
            'name': view.get_view_name(),
            'description': view.get_view_description()
        }
</code></pre>
<p>然后配置设置以使用此自定义类：</p>
<pre><code>REST_FRAMEWORK = {
    'DEFAULT_METADATA_CLASS': 'myproject.apps.core.MinimalMetadata'
}
</code></pre>
<h1 id="third-party-packages"><a class="toclink" href="#third-party-packages">Third party packages</a></h1>
<p>The following third party packages provide additional metadata implementations.</p>
<h2 id="drf-schema-adapter"><a class="toclink" href="#drf-schema-adapter">DRF-schema-adapter</a></h2>
<p><a href="https://github.com/drf-forms/drf-schema-adapter">drf-schema-adapter</a> is a set of tools that makes it easier to provide schema information to frontend frameworks and libraries. It provides a metadata mixin as well as 2 metadata classes and several adapters suitable to generate <a href="http://json-schema.org/">json-schema</a> as well as schema information readable by various libraries.</p>
<p>You can also write your own adapter to work with your specific frontend.
If you wish to do so, it also provides an exporter that can export those schema information to json files.</p>
            

          </div> <!--/span-->
        </div> <!--/row-->
      </div> <!--/.fluid-container-->
    </div> <!--/.body content-->
    <div id="push"></div>
  </div> <!--/.wrapper -->

  <footer class="span12">
    <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.
    </p>
  </footer>

  <!-- Le javascript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
  <script async src="https://fund.django-rest-framework.org/sidebar_include.js"></script>
  <script src="../../js/jquery-1.8.1-min.js"></script>
  <script src="../../js/prettify-1.0.js"></script>
  <script src="../../js/bootstrap-2.1.1-min.js"></script>
  <script src="../../js/theme.js"></script>

  <script>var base_url = '../..';</script>
  
  <script src="../../search/main.js" defer></script>
  

  <script>
    var shiftWindow = function() {
      scrollBy(0, -50)
    };

    if (location.hash) shiftWindow();
    window.addEventListener("hashchange", shiftWindow);

    $('.dropdown-menu').on('click touchstart', function(event) {
      event.stopPropagation();
    });

    // Dynamically force sidenav/dropdown to no higher than browser window
    $('.side-nav, .dropdown-menu').css('max-height', window.innerHeight - 130);

    $(function() {
      $(window).resize(function() {
        $('.side-nav, .dropdown-menu').css('max-height', window.innerHeight - 130);
      });
    });
  </script>
</body>

</html>